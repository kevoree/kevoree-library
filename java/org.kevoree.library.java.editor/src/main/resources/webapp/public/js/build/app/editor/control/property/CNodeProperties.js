define(["abstraction/property/KNodeProperties","presentation/property/UINodeProps","control/AController","command/PushToCommand","command/PullFromCommand","util/Pooffs"],function(e,t,n,r,i,s){function o(n){e.prototype.constructor.call(this,n),this._ui=new t(this),this._pushCmd=new r,this._pullCmd=new i}function u(e){var t,n;for(var r in e.values){e.values[r].getTargetNode()&&e.values[r].getTargetNode().getName()==e.nodeName&&(e.values[r].getAttribute().getName()=="ip"&&(t=e.values[r].getValue()),e.values[r].getAttribute().getName()=="port"&&(n=e.values[r].getValue()));if(t&&n)break}t&&n?e.found.call(this,t,n):e.none.call()}return s.extends(o,n),s.extends(o,e),o.prototype.p2cPushModel=function(e){if(e!=undefined){var t=this.getNode().getEditor(),n=t.getEntity(e),r=this;this._pushCmd.execute(this,t.getModel(),n,function(e){if(e)return r._ui.c2pUnableToPush(e.message);r._ui.c2pPushModelEndedWell()}),this._ui.c2pPushModelStarted()}},o.prototype.p2cPullModel=function(e){if(e!=undefined){var t=this.getNode().getEditor(),n=t.getEntity(e),r=this;this._pullCmd.execute(this.getNode(),n,t.getModel(),{success:function(e){t.setModel(e),r._ui.c2pPullModelEndedWell()},error:function(e){r._ui.c2pUnableToPull(e)}}),this._ui.c2pPullModelStarted()}},o.prototype.p2cSelectedNodeNetwork=function(e){var t=this.getNodeNetworkByInitByName(e);if(t==null){var n=this.getNode().getEditor().getEntity(e),r=require("factory/CFactory").getInstance().newNodeNetwork(n,this);this.addNodeNetwork(r)}},o.prototype.p2cUnselectedNodeNetwork=function(e){var t=this.getNodeNetworks(),n=!1;if(t.length>1)for(var r=0;r<t.length;r++)t[r].getInitBy().getName()==e&&(this.removeNodeNetwork(t[r]),n=!0);n||this._ui.c2pSelectNodeNetwork(e)},o.prototype.addLink=function(t){e.prototype.addLink.call(this,t),this._ui.c2pNodeLinkAdded(t.getUI())},o.prototype.p2cAddNodeLink=function(){var e=require("factory/CFactory").getInstance().newNodeLink(this);this.addLink(e)},o.prototype.removeLink=function(t){e.prototype.removeLink.call(this,t);var n=this.getLinks();for(var r in n)r>0?n[r].getUI().setActive(!1):n[r].getUI().setActive(!0);n.length==1?this._ui.c2pDisableDeleteNodeLinkButton():this._ui.c2pEnableDeleteNodeLinkButton(),this._ui.c2pNodeLinkRemoved(t.getUI())},o.prototype.p2cDeleteNodeLink=function(e){var t=this.getLinks();if(t.length>1)for(var n in t)if(t[n]._id==e){this.removeLink(t[n]);break}},o.prototype.p2cSaveProperties=function(e){this.getNode().p2cSaveProperties(e)},o.prototype.p2cRemoveEntity=function(){this.getNode().p2cRemoveEntity()},o.prototype.p2cSaveNetworkProperties=function(){this.getNode().getEditor().updateModel(this)},o});