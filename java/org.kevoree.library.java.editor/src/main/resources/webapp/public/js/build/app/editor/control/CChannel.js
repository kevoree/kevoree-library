define(["abstraction/KChannel","abstraction/KComponent","abstraction/KInputPort","abstraction/KOutputPort","presentation/UIChannel","control/AController","control/CEntity","util/Pooffs"],function(e,t,n,r,i,s,o,u){function a(t,n){e.prototype.constructor.call(this,t,n),o.prototype.constructor.call(this,t,n),this._ui=new i(this)}function f(e,t){var n=e.getWires();for(var r=0;r<n.length;r++){var i=n[r],s=i.getOrigin(),o=i.getTarget();if(s&&o&&s==e&&o==t)return!1}return!0}return u.extends(a,s),u.extends(a,o),u.extends(a,e),a.prototype.p2cMouseOver=function(){var e=this.getEditor().getCurrentWire();if(e){var t=e.getOrigin();t.getEntityType()==n.ENTITY_TYPE||t.getEntityType()==r.ENTITY_TYPE?f(t,this)?this._ui.c2pDropPossible():this._ui.c2pDropImpossible():this._ui.c2pDropImpossible()}else this._ui.c2pPointerOverShape()},a.prototype.p2cMouseUp=function(){var e=this.getEditor().getCurrentWire();if(e){var t=e.getOrigin();t.getEntityType()==n.ENTITY_TYPE||t.getEntityType()==r.ENTITY_TYPE?f(t,this)?(e.setTarget(this),this.addWire(e),this.getEditor().endWireCreationTask(),this._ui.c2pWireCreated(e.getUI())):(this._ui.c2pDropImpossible(),this.getEditor().abortWireCreationTask()):(this._ui.c2pDropImpossible(),this.getEditor().abortWireCreationTask())}else this._ui.c2pPointerOverShape()},a.prototype.p2cDragMove=function(){var e=this.getWires();e.length>0&&this.getEditor().getUI().getWiresLayer().draw()},a.prototype.remove=function(){o.prototype.remove.call(this)},a});