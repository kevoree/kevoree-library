define(["jquery","util/ModelHelper","util/AlertPopupHelper","kevoree"],function(e,t,n,r){function s(){}var i=".merge-file-command";return s.prototype.execute=function(t){e("#file").trigger("click"),e("#file").off(i),e("#file").on("change"+i,function(){var s=e("#file").get(0).files[0];e("#file").get(0).files.length>1&&console.warn("You have selected multiple files ("+e("#file").get(0).files[0].length+") so I took the first one in the list ("+e("#file").get(0).files[0].name+")");var o=new FileReader;o.onload=function(e){var i=JSON.parse(e.target.result),o=JSON.stringify(i);try{var u=new r.org.kevoree.loader.JSONModelLoader,a=u.loadModelFromString(o).get(0),f=t.getModel();if(f!=null){var l=new r.org.kevoree.compare.DefaultModelCompare,c=l.merge(a,f);c.applyOn(a)}t.setModel(a),n.setText('Model "'+s.name+'" merged successfully'),n.setType(n.SUCCESS),n.show(5e3)}catch(h){n.setText(h.message),n.setType(n.ERROR),n.show(5e3)}},o.readAsText(s),e(this).val(""),e("#file").off(i)})},s});