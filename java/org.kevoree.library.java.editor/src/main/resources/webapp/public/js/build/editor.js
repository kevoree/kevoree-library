requirejs.config({baseUrl:"js/lib",paths:{bootstrap:"bootstrap/src",app:"../app",util:"../app/util",abstraction:"../app/editor/abstraction",visitor:"../app/editor/visitor",control:"../app/editor/control",resolver:"../app/editor/resolver",presentation:"../app/editor/presentation",factory:"../app/editor/factory",command:"../app/editor/command",templates:"../app/templates"}}),define(["jquery","kinetic","factory/CFactory","util/Config","behave","util/QueryString","command/SaveCommand","command/SaveAsKevsCommand","command/SaveAsPNGCommand","command/LoadCommand","command/OpenKevsEditorCommand","command/RunKevScriptCommand","command/SettingsCommand","command/LoadCoreLibrariesCommand","command/MergeDefaultLibraryCommand","command/ClearCommand","command/ClearInstancesCommand","command/OpenFromNodeCommand","command/ZoomInCommand","command/ZoomDefaultCommand","command/ZoomToCommand","command/ZoomOutCommand","command/ShowStatsCommand","command/CheckModelCommand","command/LoadSettingsCommand","command/MergeCommand","command/ListenToCommand","bootstrap/tooltip","bootstrap/modal","bootstrap/collapse","bootstrap/dropdown","bootstrap/alert","bootstrap/popover","bootstrap/tab","hammer","touchpunch","jqueryui/selectable"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k){function _(t){e(".corelib-item-label").filter(function(){var n=e(this),r=n.text().toLowerCase();r.search(t)==-1?n.hide():n.show()})}var L=n.getInstance().newEditor(r.CONTAINER_ID);L.getUI().create(e("#"+r.CONTAINER_ID).width(),e("#"+r.CONTAINER_ID).height());var A=new T;A.execute(L);var O=new i({textarea:document.getElementById("kev-script")}),M=new s;return M.process({zoom:function(e){var t=parseFloat(e)||1;t<0&&(t=.1);var n=new w;n.execute(L,t)},menu:function(e){var t=e=="hide"||e=="0";t?L.p2cHideLibTree():L.p2cShowLibTree()},listen:function(e){var t=new C;t.execute(L,e)},open:{deps:["protocol"],hasDeps:function(e,t){t.indexOf("ws")==0?t=r.WS:t.indexOf("http")==0&&(t=r.HTTP);var n=new g;n.execute(t,e,L,!1)},missDep:function(e){console.warn("Open from node impossible: '"+e+"' field value required in URL with 'open' (http://example.com/?open=localhost:8000&protocol=tcp)")}}}),e(".close").click(function(){e(this).parent().hasClass("alert")&&(e(this).parent().removeClass("in"),e(this).parent().addClass("hide"))}),e(window).bind("beforeunload",function(){var t=e("#ask-before-leaving").prop("checked");if(t)return"Leaving now will discard any changes you made."}),e("#editor").on("mouseenter",function(){e("#zoom-controls").stop(!0,!0).delay(600).show("fast")}),e("#editor").on("mouseleave",function(){e("#zoom-controls").stop(!0,!0).delay(600).hide("fast")}),e("#search-corelib").on("keyup",function(t){var n=e(this).val().toLowerCase();return _(n),t.preventDefault(),!1}),e("#search-corelib-button").on("click",function(t){var n=e("#search-corelib").val().toLowerCase();return _(n),t.preventDefault(),!1}),e("body").off("show.corelib-popup"),e("body").on("show.corelib-popup","#load-corelib-popup",function(){e(".corelib-item:checked").size()==0&&e("#load-corelib").addClass("disabled")}),e("#open-node-uri").on("keyup",function(t){if(t.which==13){var n=new g,r=e("#open-node-protocol option:selected").val(),i=e(this).val();n.execute(r,i,L,!1)}}),e("#load").click(function(e){var t=new f;t.execute(L),e.preventDefault()}),e("#merge").click(function(e){var t=new N;t.execute(L),e.preventDefault()}),e("#save-json").click(function(e){var t=new o;t.execute("json",L),e.preventDefault()}),e("#save-xmi").click(function(e){var t=new o;t.execute("xmi",L),e.preventDefault()}),e("#save-kevs").click(function(e){var t=new u;t.execute(),e.preventDefault()}),e("#check-model").click(function(e){var t=new x;t.execute(),e.preventDefault()}),e("#save-png").click(function(e){var t=new a;t.execute(L),e.preventDefault()}),e("#open-from-node").click(function(t){var n=new g,r=e("#open-node-protocol option:selected").val(),i=e("#open-node-uri").val();n.execute(r,i,L,!0),t.preventDefault()}),e("#open-kevs-editor").click(function(e){var t=new l;t.execute(L),e.preventDefault()}),e("#show-stats").click(function(e){var t=new S;t.execute(L),e.preventDefault()}),e("#run-kevs").click(function(t){var n=new c,r=e("#kev-script").val();n.execute(L,r),t.preventDefault()}),e("#settings").click(function(e){var t=new h;t.execute(L),e.preventDefault()}),e("#zoom-in").click(function(e){var t=new y;t.execute(L),e.preventDefault()}),e("#editor").hammer().on("pinchout",function(e){var t=new y;t.execute(L),e.preventDefault()}),e("#editor").hammer().on("pinchin",function(e){var t=new E;t.execute(L),e.preventDefault()}),e("#zoom-default").click(function(e){var t=new b;t.execute(L),e.preventDefault()}),e("#zoom-out").click(function(e){var t=new E;t.execute(L),e.preventDefault()}),e("#clear").click(function(e){var t=new v;t.execute(L),e.preventDefault()}),e("#clear-instances").click(function(e){var t=new m;t.execute(L),e.preventDefault()}),e("#model-load-corelib").click(function(e){var t=new p;t.execute(L)}),e("#load-corelib").click(function(e){var t=new d;t.execute(L),e.preventDefault()}),e("#listen-to").click(function(){var t=new C,n=e("#listen-to-uri").val();t.execute(L,n)}),{}});