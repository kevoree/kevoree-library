define(["presentation/UINestableEntity","presentation/property/UIComponentProps","util/Pooffs"],function(e,t,n){function i(n){e.prototype.constructor.call(this,n),this._headerName.setText(n.getName()+"\n"+n.getType()),this._headerName.setPadding(8),this._rect.setAttrs({fill:"black",opacity:.9,cornerRadius:10}),this._border.setAttrs({strokeWidth:r});var i=n.getInputs();for(var u=0;u<i.length;u++)this._shape.add(i[u].getUI().getShape());var a=n.getOutputs();for(var u=0;u<a.length;u++)this._shape.add(a[u].getUI().getShape());this._computedWidth=o(this._ctrl.getInputs(),this._ctrl.getOutputs(),this._rect.getWidth()),this._computedHeight=s(this._ctrl.getInputs(),this._ctrl.getOutputs(),this._rect.getHeight());var f=new t(n);this._shape.on("dblclick dbltap",function(e){e.cancelBubble=!0,f.show()})}function s(e,t,n){var r=n;if(e.length>0||t.length>0){var i=0;e.length>0?i=e[0].getUI().getHeight():i=t[0].getUI().getHeight();var s=e.length>=t.length?e.length:t.length;r=n+(i+10)*(s-1)+10}return r}function o(e,t,n){var r=n;return e.length>0&&(r+=e[0].getUI().getRadius()),t.length>0&&(r+=t[0].getUI().getRadius()),r}var r=2;return i.PORT_PADDING=10,n.extends(i,e),i.prototype._drawHeader=function(){this._headerName.setText(this._ctrl.getName()+"\n"+this._ctrl.getType())},i.prototype._draw=function(){if(this._ctrl.getParent()){var e=this._ctrl.getParent().getUI(),t=e.getChildOffset(this);this._shape.setOffset(-t.x,-t.y)}else this._rect.setWidth(this._computedWidth);this._rect.setHeight(this._computedHeight);var n=this._ctrl.getInputs(),r=n.length==0?0:this._computedHeight/n.length+1;for(var i=0;i<n.length;i++){var s=n[i].getUI(),o=s.getShape(),u=r*(i+1);o.setPosition(s.getRadius()+10,u-s.getHeight()/2-12)}var a=this._ctrl.getOutputs(),r=a.length==0?0:this._computedHeight/a.length+1;for(var i=0;i<a.length;i++){var s=a[i].getUI(),o=s.getShape(),u=r*(i+1);o.setPosition(this._rect.getWidth()-s.getRadius()-10,u-s.getHeight()/2-12)}this._headerName.setOffset(-(this.getWidth()/2-this._headerName.getWidth()/2),-(this.getHeight()/2-this._headerName.getHeight()/2))},i.prototype.c2pMouseOut=function(){document.body.style.cursor="default",this._border.setAttrs({strokeWidth:r,stroke:"white"}),this._shape.getLayer().draw()},i.prototype.getHeight=function(){return this._rect.getHeight()},i});