define(["kevoree"],function(e){function n(){this._id=null}var t=1e4;return n.prototype.execute=function(n,r,i,s){var o=this;clearTimeout(this._id),this._id=setTimeout(function(){s.error&&typeof s.error=="function"&&s.error.call(this,"Timeout: "+t+"ms")},t);var u=new e.org.kevoree.serializer.JSONModelSerializer,a=JSON.parse(u.serialize(i));$.ajax({url:"pull",type:"POST",timeout:6e4,data:{destNodeName:n.getName(),grpName:r.getName(),model:a},dataType:"json",success:function(t){switch(t.result){case 1:if(s.success&&typeof s.success=="function"){var i=new e.org.kevoree.loader.JSONModelLoader,u=i.loadModelFromString(JSON.stringify(t.model)).get(0);s.success.call(this,u)}clearTimeout(o._id);break;case-1:default:s.error&&typeof s.error=="function"&&s.error.call(this,"Something went wrong while pulling model to "+n.getName()+" via "+r.getName()),clearTimeout(o._id)}},error:function(){s.error&&typeof s.error=="function"&&s.error.call(this,"Internal Server Error"),clearTimeout(o._id)}})},n});