(function(e){var t=function(){},n=/xyz/.test(function(){return"xyz"})?/\(\s*_super\b/:{test:function(){return!0}},r=function(e,t){return e&&e.length&&e[0]===t&&(e=Array.prototype.slice.call(e,1)),e},i=function(e,t,n,i){var s;if(i){var o=n[e];s=function(){return o.apply(this,arguments)},s.apply=function(t,n){return Function.prototype.apply.call(o,t,r(n,s))}}else s=function(){return n[e].apply(this,arguments)},s.apply=function(i,o){return Function.prototype.apply.call(n[e],i,r(o,s))};return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(s),t.apply(this,n)}},s=function(e,t){t=t||this.constructor&&this.constructor.prototype;for(var r in e){if(r==="construct"||r==="destruct")continue;var s=t&&typeof e[r]=="function"&&typeof t[r]=="function"&&n.test(e[r]);s?this.hasOwnProperty(r)?this[r]=i(r,e[r],this,!0):this[r]=i(r,e[r],t,!1):this[r]=e[r]}},o=function(e){return e&&e.extend?e.extend.extend(e):o.extend(e)};o.prototype.mixin=s,o.extend=function u(e){function f(){if(this instanceof f==0)throw new Error("Cannot create instance without new operator");this.construct.apply(this,arguments),this.init()}var n=this.prototype,r=Object.create(n);if(e){s.call(r,e,n);if(Array.isArray(e.mixins))for(var i=0,o=e.mixins.length;i<o;i++)s.call(r,e.mixins[i],r);e.construct&&n.construct?r.construct=function(){n.construct.apply(this,arguments),e.construct.apply(this,arguments)}:e.construct&&(r.construct=e.construct),e.destruct&&n.destruct?r.destruct=function(){e.destruct.apply(this,arguments),n.destruct.apply(this,arguments)}:e.destruct&&(r.destruct=e.destruct);if(typeof e.toString=="string"){var a=e.toString;r.toString=function(){return a}}}return typeof r.construct!="function"&&(r.construct=t),typeof r.init!="function"&&(r.init=t),r.constructor=f,r.superPrototype=n,f.prototype=r,f.extend=u,f},typeof module!="undefined"&&module.exports?module.exports=o:typeof e.define=="function"?function(e){e([],function(){return o})}(e.define):e.Class=o})(this);