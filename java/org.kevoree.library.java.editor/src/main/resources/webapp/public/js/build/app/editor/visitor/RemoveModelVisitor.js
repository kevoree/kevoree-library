define(["abstraction/KGroup","abstraction/KInputPort","abstraction/KOutputPort","kevoree"],function(e,t,n,r){function i(){this._factory=new r.org.kevoree.impl.DefaultKevoreeFactory,this._listener=function(){}}return i.prototype.setModel=function(e){this._model=e},i.prototype.setListener=function(e){if(!e||typeof e!="function")throw"RemoveModelVisitor setListener's callback is not a function.";this._listener=e},i.prototype.visitChannel=function(e){var t=this._model.findHubsByID(e._name);t!=null&&(this._model.removeHubs(t),this._listener.call(this))},i.prototype.visitNode=function(e){var t=this._model.findNodesByID(e._name);if(t!=null){var n=e.getWires();for(var r in n){var i=this._model.findGroupsByID(n[r].getOrigin().getName()),s=n[r].getOrigin().getDictionary(),o=s.getValues();for(var u in o){var a=o[u].getTargetNode();a!=null&&a.getName()==e.getName()&&o[u]._instance!=null&&s._instance.removeValues(o[u]._instance)}i.removeSubNodes(t)}this._model.removeNodes(t),this._listener.call(this)}},i.prototype.visitComponent=function(e){var t=this._model.findNodesByID(e._parent.getName()),n=t.findComponentsByID(e._name);t!=null&&n!=null&&(t.removeComponents(n),this._listener.call(this))},i.prototype.visitGroup=function(e){var t=this._model.findGroupsByID(e._name);t!=null&&(this._model.removeGroups(t),this._listener.call(this))},i.prototype.visitOutputPort=function(e){},i.prototype.visitInputPort=function(e){},i.prototype.visitWire=function(e){if(e._instance){var t=e.getOrigin()._instance,n=e.getTarget()._instance;t&&t.removeBindings(e._instance),n&&n.removeBindings(e._instance),this._model.removeMBindings(e._instance),this._listener.call(this)}},i.prototype.visitNodeProperties=function(e){var t=e.getNodeNetworks();for(var n=0;n<t.length;n++)t[n].accept(this);this._listener.call(this)},i.prototype.visitNodeNetwork=function(e){e._instance!=null&&(this._model.removeNodeNetworks(e._instance),this._listener.call(this))},i.prototype.visitNodeLink=function(e){var t=e.getNodeProperties().getNodeNetworks();for(var n in t)t[n]._instance&&(t[n]._instance.removeLink(e._instance),this._listener.call(this))},i.prototype.visitNetworkProperty=function(e){var t=e.getLink();t._instance&&(t._instance.removeNetworkProperties(e._instance),this._listener.call(this))},i});